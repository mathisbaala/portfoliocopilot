#!/bin/bash

# Hook pre-push pour protÃ©ger la branche main
# Place ce fichier dans .git/hooks/pre-push

current_branch=$(git symbolic-ref HEAD | sed -e 's,.*/\(.*\),\1,')

if [ "$current_branch" = "main" ]; then
    echo "ğŸš¨ ATTENTION: Vous Ãªtes sur la branche MAIN"
    echo ""
    echo "ÃŠtes-vous sÃ»r de vouloir push sur main?"
    echo "Assurez-vous que:"
    echo "  âœ… npm run build fonctionne"
    echo "  âœ… npm run lint est OK"
    echo "  âœ… Vous avez testÃ© votre code"
    echo "  âœ… Vous avez prÃ©venu l'Ã©quipe"
    echo ""
    read -p "Continuer? (yes/no): " -n 3 -r
    echo
    if [[ ! $REPLY =~ ^yes$ ]]; then
        echo "âŒ Push annulÃ©"
        exit 1
    fi
fi

exit 0
